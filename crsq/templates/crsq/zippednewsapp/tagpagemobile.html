{% extends "crsq/zippednewsapp/base.html" %}
{% load staticfiles %}
{% load tagfilter %}

{% block title %}
{% if tag == "technology-top-trending" or tag == "sports-top-trending" or tag == "science-top-trending" or tag == "health-top-trending" or tag == "world-top-trending" or tag == "business-top-trending" or tag == "top-trending" %}
{{ tag | crsq_unslugify }} News - ZippedNews
{% else %}
{{ tag | crsq_unslugify }} - Latest news on {{ tag | crsq_unslugify }} - ZippedNews
{% endif %}
{% endblock %}

{% block navbartitle %}
{{ tag | crsq_unslugify | truncatechars:18}} | <span class="glyphicon glyphicon-home"> </span> ZippedNews
{% endblock %}

{% block bodycontent %}

<style type="text/css">
.navbar-brand {
	padding-top: 3px;
	padding-bottom: 3px;
	height: auto!important;
}

.navbar {
	min-height: 0px;
	margin-bottom: 0px;
}

body {
	padding-top:30px!important;
}
</style>

	    {% for article in articles %}
		  <div class="row swipeenabled" style="margin-top:15px;left:auto;right:auto;display:none;" >
		  <img id="flickimage" src="{% static 'crsq/img/zippednewsapp/swipe.png' %}" style="position:fixed;right:0px;top:300px;z-index:1000;width:60%;display:none;"/>
		  <div class="col-sm-3 col-lg-3 col-md-3" style="margin-bottom:2px;">
		  <div style="width:100%;height:180px;position:relative;overflow:hidden;">
		  <img class="articleimage" src="{% static 'crsq/img/zippednewsapp/loading.gif' %}" data-src="{{ article.articleimage }}" alt="{{ tag | crsq_unslugify }} News - {{ article.articletitle }}" title="{{ tag | crsq_unslugify }} News - {{ article.articletitle }}" style="width:100%;position:absolute;margin:auto;top:0;left:0;right:0;bottom:0px;"/>
		  </div>
		  </div>
		  <div class="col-sm-9 col-lg-9 col-md-9">
		  <h4 style="margin:0px;"><a rel="nofollow" target="_blank" href="{{ article.url }}">{{ article.articletitle }}<br/><small>{{ article.domain }}{% if article.articledate %} - {{ article.articledate | date:"D d M Y" }}{% endif %}</small></a></h4>
                  <p style="text-align:justify;" class="summary"><i>Summary:</i> {{ article.articlesummary }} (<a href="{{ article.url }}" target="_blank" rel="nofollow">Read Full Article</a>)</p>
		 <p style="text-align:justify" class="tags">{% if article.tags %}<i>Related Topics:</i> {% endif %}{% for t in article.tags %}<a href="/{{t | slugify}}">{{ t | crsq_unslugify }}</a>{% if not forloop.last %}, {% endif %}{% endfor %}</p><br/>

		<div class="addthis_toolbox addthis_default_style addthis_32x32_style" addthis:url="{{ article.url }}" addthis:title="{{ article.articletitle | truncatechars:100 }} - via #ZippedNews" style="font-size:50%">
		<a class="addthis_button_facebook"></a>
		<a class="addthis_button_twitter"></a>
		<a class="addthis_button_google_plusone_share"></a>
		<a class="addthis_button_linkedin"></a>
		<a class="addthis_button_email"></a>
		</div>

		<br/>  
		  </div>
		  </div>
	    {% endfor %}

                  <div class="row swipeenabled" style="margin-top:15px;left:auto;right:auto;display:none;" >
                        <div class="panel panel-default">
                                <div class="panel-heading">That's all on "{{ tag | crsq_unslugify }}" for now. Read more on related topics:</div>
                                <ul class="list-group">
                                          {% for s in relatedtopics %}
                                                  <li class="list-group-item">
                                                          <a href="/{{ s | slugify }}"><p class="list-group-item-text">{{ s | crsq_unslugify }}</p></a>
                                                  </li>
                                           {% endfor %}
                                </ul>
                         </div>

			<br/>
                  </div>

{% endblock %}

{% block footercontent %}
<br/>
<div align="center">
<div id="pager" style="display:none">
  <a href="#" class="activeSlide">0</a>
  {% for article in articles %}
  <a href="#" class="">{{ forloop.counter }}</a>
  {% endfor %}
</div>
</div>
<br/>
{% endblock %}


{% block jscontent %}

    <script>
	$(window).ready(function() {

	    $.getScript("//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-535dfc3b5355e5f7")
            $('.articleimage').jail({loadHiddenImages : true});
	    $('.swipeenabled').first().show();
	    $('#pager').show();
	    $("#flickimage").delay(3000).fadeIn("slow").delay(3000).fadeOut("slow");
		
	    //$('.swipeenabled').draggable({ axis: "x", stop: function( event, ui ) { if ((ui.position.left < 31) && (ui.position.left > -31)) {$(this).css('left', 'auto'); $(this).css('right', 'auto'); }  } });
	    $('.swipeenabled').swipe({
		  swipeLeft:function(event, direction, distance, duration, fingerCount) {
			    if ($(this).next('.swipeenabled').length > 0) {
				    $(this).hide("slide", { direction: "left" }, 150, function() { 
					    $(this).css('left', 'auto'); $(this).css('right', 'auto');
					    $(this).next().show("slide", { direction: "right" }, 60);
					    var presentActive = $('.activeSlide')
					    $(presentActive).next().addClass('activeSlide');
					    $(presentActive).removeClass('activeSlide');
				    })
			    }
			    else {
				$(this).css('left', 'auto'); $(this).css('right', 'auto');
			    }
		  },
		  swipeRight:function(event, direction, distance, duration, fingerCount) {
			   if ($(this).prev('.swipeenabled').length > 0) {
				   $(this).hide("slide", { direction: "right" }, 150, function() {
				   	$(this).css('left', 'auto'); $(this).css('right', 'auto');
				   	$(this).prev().show("slide", { direction: "left" }, 60);
                                        var presentActive = $('.activeSlide')
                                        $(presentActive).prev().addClass('activeSlide');
                                        $(presentActive).removeClass('activeSlide');

				   })
			   }
			   else {
				$(this).css('left', 'auto'); $(this).css('right', 'auto');
			   }
		  },
		  threshold: 30
	     });
          });

    </script>

{% endblock %}

